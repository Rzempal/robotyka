<!-- mockup-color-switcher.html v1.2.0 -->
<!DOCTYPE html>
<html lang="pl" data-accent="A" data-secondary="orange">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warianty Kolorystyczne ‚Äî Brutalism Style</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           GLOBAL VARIABLES & THEME SETUP
           ============================================ */
        :root {
            /* Base Colors */
            --color-bg: #0a0a0a;
            --color-bg-alt: #1a1a1a;
            --color-text: #ffffff;
            --color-text-muted: #888888;
            
            /* Default Secondary */
            --color-secondary: #FF6B35;
            --color-secondary-dark: #ffffff;

            /* Default Accent */
            --color-accent: #3B82F6; 
            --color-accent-hover: #2563EB;
            --color-accent-dark: #0a0a0a;

            /* Fonts & Spacing */
            --font-display: 'Anton', sans-serif;
            --font-mono: 'Space Mono', monospace;
            --border-thick: 4px;
            --transition-fast: 0.15s;
        }

        /* Light Mode Overrides */
        [data-theme="light"] {
            --color-bg: #f5f5f5;
            --color-bg-alt: #ffffff;
            --color-text: #0a0a0a;
            --color-text-muted: #555555;
        }

        /* ============================================
           PRIMARY ACCENT SCHEMES [data-accent]
           ============================================ */
        /* Existing */
        [data-accent="A"] { --color-accent: #3B82F6; --color-accent-hover: #2563EB; } /* Niebieski */
        [data-accent="B"] { --color-accent: #F59E0B; --color-accent-hover: #D97706; } /* Z≈Çoty */
        [data-accent="C"] { --color-accent: #10B981; --color-accent-hover: #059669; } /* Szmaragd */
        [data-accent="D"] { --color-accent: #6366F1; --color-accent-hover: #4F46E5; } /* Indigo */
        [data-accent="E"] { --color-accent: #FFFFFF; --color-accent-hover: #E5E5E5; } /* Bia≈Çy */
        [data-theme="light"][data-accent="E"] { --color-accent: #FFFFFF; --color-accent-hover: #d4d4d4; }
        [data-accent="F"] { --color-accent: #3AAFA9; --color-accent-hover: #2B7A78; } /* Zielony */

        /* NEW Primary Colors */
        [data-accent="G"] { --color-accent: #94A3B8; --color-accent-hover: #64748B; } /* Titanium/Stal */
        [data-accent="H"] { --color-accent: #8B5CF6; --color-accent-hover: #7C3AED; } /* Lidar/Fiolet */
        [data-accent="I"] { --color-accent: #EAB308; --color-accent-hover: #CA8A04; } /* Factory Yellow */


        /* ============================================
           SECONDARY COLOR SCHEMES [data-secondary]
           ============================================ */
        /* Existing */
        [data-secondary="orange"] { --color-secondary: #FF6B35; --color-secondary-dark: #ffffff; }
        [data-secondary="red"]    { --color-secondary: #E63946; --color-secondary-dark: #ffffff; }
        [data-secondary="green"]  { --color-secondary: #BFFF00; --color-secondary-dark: #0a0a0a; }

        /* NEW Secondary Colors */
        [data-secondary="cyan"]    { --color-secondary: #06B6D4; --color-secondary-dark: #0a0a0a; } /* Arc/Electric */
        [data-secondary="magenta"] { --color-secondary: #DB2777; --color-secondary-dark: #ffffff; } /* Laser */
        [data-secondary="blue"]    { --color-secondary: #2563EB; --color-secondary-dark: #ffffff; } /* Signal Blue */


        /* ============================================
           CORE STYLES
           ============================================ */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 16px; scroll-behavior: smooth; }
        body {
            font-family: var(--font-mono);
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.5;
            cursor: crosshair;
            transition: background var(--transition-fast), color var(--transition-fast);
        }
        ::selection { background: var(--color-accent); color: var(--color-bg); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }

        /* Navigation */
        nav {
            border-bottom: var(--border-thick) solid var(--color-text);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            background: var(--color-bg);
            z-index: 100;
        }
        nav .container { display: flex; justify-content: space-between; align-items: center; }
        .logo {
            font-family: var(--font-display);
            font-size: 1.75rem;
            text-decoration: none;
            color: var(--color-text);
            letter-spacing: 0.05em;
        }
        .logo:hover { color: var(--color-accent); }
        
        /* Nav Links & Controls */
        .nav-group { display: flex; align-items: center; gap: 1.5rem; }
        .nav-links { display: flex; gap: 0; list-style: none; align-items: center; }
        .nav-links a {
            display: block;
            padding: 0.6rem 1.25rem;
            font-size: 0.8rem;
            font-weight: 700;
            text-decoration: none;
            color: var(--color-text);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: var(--border-thick) solid transparent;
            transition: all var(--transition-fast);
        }
        .nav-links a:hover, .nav-links a.active {
            background: var(--color-accent);
            color: var(--color-accent-dark);
            border-color: var(--color-text);
        }

        /* Color Switcher Container */
        .switcher-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .switcher-group {
            display: flex;
            gap: 0.3rem; /* Slightly tighter gap for more buttons */
            align-items: center;
            padding-right: 1rem;
            border-right: 2px solid var(--color-text);
        }
        .switcher-group:last-child { border-right: none; padding-right: 0; }
        
        .switcher-label {
            font-size: 0.6rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--color-text-muted);
            margin-right: 0.2rem;
        }

        .color-btn {
            width: 1.1rem;
            height: 1.1rem;
            border-radius: 50%;
            border: 2px solid var(--color-text);
            cursor: pointer;
            position: relative;
            transition: transform 0.2s;
            flex-shrink: 0;
        }
        .color-btn:hover { transform: scale(1.2); }
        .color-btn.active { 
            transform: scale(1.3); 
            border-color: var(--color-text); 
            box-shadow: 0 0 0 2px var(--color-bg), 0 0 0 4px var(--color-text);
            z-index: 10;
        }

        /* Primary Buttons Colors */
        .color-btn[data-set-accent="A"] { background-color: #3B82F6; }
        .color-btn[data-set-accent="B"] { background-color: #F59E0B; }
        .color-btn[data-set-accent="C"] { background-color: #10B981; }
        .color-btn[data-set-accent="D"] { background-color: #6366F1; }
        .color-btn[data-set-accent="E"] { background-color: #FFFFFF; }
        .color-btn[data-set-accent="F"] { background-color: #3AAFA9; }
        .color-btn[data-set-accent="G"] { background-color: #94A3B8; } /* Titanium */
        .color-btn[data-set-accent="H"] { background-color: #8B5CF6; } /* Lidar */
        .color-btn[data-set-accent="I"] { background-color: #EAB308; } /* Factory */


        /* Secondary Buttons Colors */
        .color-btn[data-set-secondary="orange"]  { background-color: #FF6B35; }
        .color-btn[data-set-secondary="red"]     { background-color: #E63946; }
        .color-btn[data-set-secondary="green"]   { background-color: #BFFF00; }
        .color-btn[data-set-secondary="cyan"]    { background-color: #06B6D4; } /* New */
        .color-btn[data-set-secondary="magenta"] { background-color: #DB2777; } /* New */
        .color-btn[data-set-secondary="blue"]    { background-color: #2563EB; } /* New */

        .theme-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            margin-left: 0.5rem;
            background: var(--color-bg-alt);
            border: var(--border-thick) solid var(--color-text);
            cursor: pointer;
            color: var(--color-text);
            transition: background var(--transition-fast);
        }
        .theme-toggle:hover { background: var(--color-secondary); color: var(--color-secondary-dark); }

        /* Hero */
        .hero {
            min-height: 70vh;
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-bottom: var(--border-thick) solid var(--color-text);
        }
        .hero-content {
            padding: 4rem 3rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-right: var(--border-thick) solid var(--color-text);
        }
        .hero-tag {
            display: inline-block;
            padding: 0.4rem 0.8rem;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            background: var(--color-secondary);
            color: var(--color-secondary-dark);
            margin-bottom: 1.5rem;
            transform: rotate(-2deg);
            width: fit-content;
            transition: background var(--transition-fast), color var(--transition-fast);
        }
        h1 {
            font-family: var(--font-display);
            font-size: clamp(3rem, 8vw, 6rem);
            line-height: 0.95;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
        }
        h1 .accent { display: block; color: var(--color-accent); }
        .hero-description {
            font-size: 0.9rem;
            line-height: 1.7;
            max-width: 380px;
            margin-bottom: 2rem;
            color: var(--color-text-muted);
        }
        .hero-visual {
            background: var(--color-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: background var(--transition-fast);
        }
        .hero-image-wrapper { width: 75%; height: 75%; position: relative; }
        .hero-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border: var(--border-thick) solid var(--color-bg);
            filter: grayscale(100%) contrast(1.2);
            mix-blend-mode: multiply;
        }
        .glitch-box {
            position: absolute;
            top: 10%;
            right: -15px;
            padding: 0.75rem 1rem;
            background: var(--color-bg);
            border: var(--border-thick) solid var(--color-text);
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transform: rotate(5deg);
        }

        /* Buttons */
        .btn-brutal {
            display: inline-block;
            padding: 1rem 2.5rem;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            text-decoration: none;
            color: var(--color-accent-dark);
            background: var(--color-accent);
            border: var(--border-thick) solid var(--color-text);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        .btn-brutal:hover {
            transform: translate(-4px, -4px);
            box-shadow: 8px 8px 0 var(--color-text);
        }
        .btn-brutal--secondary {
            background: var(--color-secondary);
            color: var(--color-secondary-dark);
        }

        /* Marquee */
        .marquee {
            overflow: hidden;
            background: var(--color-accent);
            padding: 0.75rem 0;
            border-bottom: var(--border-thick) solid var(--color-text);
            transition: background var(--transition-fast);
        }
        .marquee-track { display: flex; animation: marquee 25s linear infinite; }
        .marquee-content { display: flex; gap: 3rem; padding: 0 1.5rem; white-space: nowrap; }
        .marquee-content span {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--color-accent-dark);
            text-transform: uppercase;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Cards */
        .section { padding: 0; }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: var(--border-thick) solid var(--color-text);
        }
        .section-title { font-family: var(--font-display); font-size: 2rem; text-transform: uppercase; }
        .section-count { font-size: 0.8rem; text-transform: uppercase; color: var(--color-accent); }
        .cards-grid { display: grid; grid-template-columns: repeat(2, 1fr); }
        .card {
            border-right: var(--border-thick) solid var(--color-text);
            border-bottom: var(--border-thick) solid var(--color-text);
            padding: 2rem;
            background: var(--color-bg);
            transition: all var(--transition-fast);
        }
        .card:nth-child(2n) { border-right: none; }
        .card:hover {
            transform: translate(-4px, -4px);
            box-shadow: 8px 8px 0 var(--color-accent);
        }
        .card-number { font-family: var(--font-display); font-size: 2.5rem; color: var(--color-accent); margin-bottom: 1rem; }
        .card-title { font-family: var(--font-display); font-size: 1.25rem; text-transform: uppercase; margin-bottom: 0.5rem; }
        .card-category {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--color-secondary);
            margin-bottom: 1rem;
        }
        .card-description { font-size: 0.85rem; line-height: 1.6; color: var(--color-text-muted); }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            border-bottom: var(--border-thick) solid var(--color-text);
        }
        .stat-item {
            padding: 2.5rem 1.5rem;
            border-right: var(--border-thick) solid var(--color-text);
            text-align: center;
            transition: background var(--transition-fast), color var(--transition-fast);
        }
        .stat-item:last-child { border-right: none; }
        .stat-item:nth-child(odd) { background: var(--color-accent); color: var(--color-accent-dark); }
        .stat-item:nth-child(even) { background: var(--color-bg); color: var(--color-accent); }
        .stat-value { font-family: var(--font-display); font-size: 3rem; line-height: 1; margin-bottom: 0.4rem; }
        .stat-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.15em; }

        /* CTA */
        .cta {
            display: grid;
            grid-template-columns: 2fr 1fr;
            border-bottom: var(--border-thick) solid var(--color-text);
        }
        .cta-content {
            padding: 4rem 3rem;
            border-right: var(--border-thick) solid var(--color-text);
        }
        .cta-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 4rem);
            text-transform: uppercase;
            line-height: 1;
            margin-bottom: 1.5rem;
        }
        .cta-title .accent { color: var(--color-secondary); }
        .cta-description {
            font-size: 0.9rem;
            max-width: 450px;
            margin-bottom: 2rem;
            line-height: 1.7;
            color: var(--color-text-muted);
        }
        .cta-visual {
            background: var(--color-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background var(--transition-fast);
        }
        .cta-visual span {
            font-family: var(--font-display);
            font-size: 6rem;
            color: var(--color-secondary-dark);
            transform: rotate(-10deg);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .cta:hover .cta-visual span { transform: rotate(-20deg) scale(1.1); }

        /* Footer */
        footer { padding: 2rem; display: flex; justify-content: space-between; align-items: center; }
        .footer-logo { font-family: var(--font-display); font-size: 1.25rem; color: var(--color-text); text-decoration: none; }
        .footer-links { display: flex; gap: 2rem; }
        .footer-links a { font-size: 0.7rem; text-transform: uppercase; color: var(--color-text); text-decoration: none; }
        .footer-links a:hover { color: var(--color-accent); }
        .copyright { font-size: 0.7rem; text-transform: uppercase; color: var(--color-text-muted); }

        /* Responsive */
        @media (max-width: 1024px) {
            .hero { grid-template-columns: 1fr; }
            .hero-content { border-right: none; border-bottom: var(--border-thick) solid var(--color-text); }
            .hero-visual { min-height: 40vh; }
            .cta { grid-template-columns: 1fr; }
            .cta-content { border-right: none; }
            .stats { grid-template-columns: repeat(2, 1fr); }
            .nav-group { gap: 1rem; }
            .switcher-group { border-right: none; padding-right: 0.5rem; }
        }
        @media (max-width: 768px) {
            .nav-links a:not(.theme-toggle) { display: none; }
            .cards-grid { grid-template-columns: 1fr; }
            .card { border-right: none; }
            .stats { grid-template-columns: 1fr; }
            .stat-item { border-right: none; }
            footer { flex-direction: column; gap: 1.5rem; text-align: center; }
            
            /* Adjust color switcher for mobile */
            .switcher-container {
                flex-wrap: wrap;
                max-width: 200px;
                justify-content: flex-end;
            }
        }

        /* Color Label Debug/Info */
        .color-label {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            padding: 0.75rem 1.5rem;
            background: var(--color-secondary);
            color: var(--color-secondary-dark);
            font-family: var(--font-mono);
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: var(--border-thick) solid var(--color-text);
            z-index: 1000;
            transition: background var(--transition-fast), color var(--transition-fast);
        }
    </style>
</head>
<body>
    <div class="color-label" id="current-scheme-label">A: Niebieski + Orange</div>

    <nav>
        <div class="container">
            <a href="#" class="logo">ROBOTYKA</a>
            
            <div class="nav-group">
                <ul class="nav-links">
                    <li><a href="#" class="active">Start</a></li>
                    <li><a href="#">Do≈õwiadczenie</a></li>
                    <li><a href="#">Projekty</a></li>
                    <li><a href="#">Kontakt</a></li>
                </ul>

                <!-- Dual Color Switcher & Theme Toggle -->
                <div class="switcher-container">
                    <!-- Primary Accent Switcher -->
                    <div class="switcher-group">
                        <span class="switcher-label">Pri</span>
                        <button class="color-btn" data-set-accent="A" title="A. Niebieski (Corp)"></button>
                        <button class="color-btn" data-set-accent="B" title="B. Z≈Çoty (Premium)"></button>
                        <button class="color-btn" data-set-accent="C" title="C. Szmaragd (Eco)"></button>
                        <button class="color-btn" data-set-accent="D" title="D. Indigo (Future)"></button>
                        <button class="color-btn" data-set-accent="E" title="E. Bia≈Çy (Minimal)"></button>
                        <button class="color-btn" data-set-accent="F" title="F. Zielony (User)"></button>
                        <button class="color-btn" data-set-accent="G" title="G. Titanium (Tech/Metal)"></button>
                        <button class="color-btn" data-set-accent="H" title="H. Lidar (Sensors)"></button>
                        <button class="color-btn" data-set-accent="I" title="I. Factory (Fanuc/Safety)"></button>
                    </div>

                    <!-- Secondary Color Switcher -->
                    <div class="switcher-group">
                        <span class="switcher-label">Sec</span>
                        <button class="color-btn" data-set-secondary="orange" title="üü† Orange (Industrial)"></button>
                        <button class="color-btn" data-set-secondary="red" title="üî¥ Red (Warning)"></button>
                        <button class="color-btn" data-set-secondary="green" title="üü¢ Neon (Cyber)"></button>
                        <button class="color-btn" data-set-secondary="cyan" title="üîµ Cyan (Arc/EV)"></button>
                        <button class="color-btn" data-set-secondary="magenta" title="üü£ Magenta (Laser)"></button>
                        <button class="color-btn" data-set-secondary="blue" title="üîµ Signal Blue (Info)"></button>
                    </div>

                    <button class="theme-toggle" onclick="toggleTheme()" title="Prze≈ÇƒÖcz tryb jasny/ciemny">
                        <span class="theme-toggle-icon">‚óê</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="hero">
            <div class="hero-content">
                <span class="hero-tag">10+ lat do≈õwiadczenia</span>
                <h1>Symulacja <span class="accent">Robot√≥w</span></h1>
                <p class="hero-description">In≈ºynier robotyki specjalizujƒÖcy siƒô w symulacjach Process Simulate i programowaniu robot√≥w.</p>
                <a href="#" class="btn-brutal">Zobacz projekty</a>
            </div>
            <div class="hero-visual">
                <div class="hero-image-wrapper">
                    <img src="https://michalrapala.com/assets/images/robotyka/profilowe.jpg" alt="Micha≈Ç RƒÖpa≈Ça" onerror="this.src='https://placehold.co/600x600?text=Robot+Eng';">
                    <div class="glitch-box">Offline / Online</div>
                </div>
            </div>
        </section>

        <div class="marquee">
            <div class="marquee-track">
                <div class="marquee-content">
                    <span>Process Simulate</span><span>‚òÖ</span><span>KUKA</span><span>‚òÖ</span><span>ABB</span><span>‚òÖ</span><span>Fanuc</span><span>‚òÖ</span><span>Automotive</span><span>‚òÖ</span>
                </div>
                <div class="marquee-content">
                    <span>Process Simulate</span><span>‚òÖ</span><span>KUKA</span><span>‚òÖ</span><span>ABB</span><span>‚òÖ</span><span>Fanuc</span><span>‚òÖ</span><span>Automotive</span><span>‚òÖ</span>
                </div>
            </div>
        </div>

        <section class="section">
            <div class="section-header">
                <h2 class="section-title">Wybrane Projekty</h2>
                <span class="section-count">[04] Projekty</span>
            </div>
            <div class="cards-grid">
                <div class="card">
                    <span class="card-number">01</span>
                    <h3 class="card-title">BMW iX Flow</h3>
                    <p class="card-category">Simulation Leader</p>
                    <p class="card-description">Projekt symulacji linii spawalniczej z robotami KUKA.</p>
                </div>
                <div class="card">
                    <span class="card-number">02</span>
                    <h3 class="card-title">VW ID.4</h3>
                    <p class="card-category">Robotics Engineer</p>
                    <p class="card-description">Programowanie offline robot√≥w ABB i Fanuc.</p>
                </div>
                <div class="card">
                    <span class="card-number">03</span>
                    <h3 class="card-title">Magna Body Shop</h3>
                    <p class="card-category">Online Programming</p>
                    <p class="card-description">Uruchomienie linii produkcyjnej on-site.</p>
                </div>
                <div class="card">
                    <span class="card-number">04</span>
                    <h3 class="card-title">Volvo EX90</h3>
                    <p class="card-category">Simulation Engineer</p>
                    <p class="card-description">Symulacja proces√≥w zgrzewania i nitowania.</p>
                </div>
            </div>
        </section>

        <section class="stats">
            <div class="stat-item"><div class="stat-value">10+</div><div class="stat-label">Lat do≈õwiadczenia</div></div>
            <div class="stat-item"><div class="stat-value">50+</div><div class="stat-label">Projekt√≥w</div></div>
            <div class="stat-item"><div class="stat-value">8</div><div class="stat-label">Standard√≥w OEM</div></div>
            <div class="stat-item"><div class="stat-value">‚àû</div><div class="stat-label">Mo≈ºliwo≈õci</div></div>
        </section>

        <section class="cta">
            <div class="cta-content">
                <h2 class="cta-title">Szukasz <span class="accent">In≈ºyniera?</span></h2>
                <p class="cta-description">Projekty symulacyjne, programowanie offline/online, optymalizacja proces√≥w.</p>
                <a href="#" class="btn-brutal btn-brutal--secondary">Kontakt</a>
            </div>
            <div class="cta-visual"><span>!</span></div>
        </section>
    </main>

    <footer>
        <a href="#" class="footer-logo">ROBOTYKA</a>
        <div class="footer-links"><a href="#">LinkedIn</a><a href="#">Email</a></div>
        <p class="copyright">&copy; 2024 Micha≈Ç RƒÖpa≈Ça</p>
    </footer>

    <script>
        // State Management
        const PRIMARY_NAMES = {
            'A': 'Niebieski', 'B': 'Z≈Çoty', 'C': 'Szmaragd', 'D': 'Indigo', 'E': 'Bia≈Çy', 'F': 'Zielony',
            'G': 'Titanium', 'H': 'Lidar', 'I': 'Factory'
        };
        const SECONDARY_NAMES = {
            'orange': 'Orange', 'red': 'Red', 'green': 'Neon',
            'cyan': 'Cyan', 'magenta': 'Laser', 'blue': 'Signal Blue'
        };

        function getPreferredState() {
            const savedTheme = localStorage.getItem('theme');
            const savedAccent = localStorage.getItem('accent') || 'A';
            const savedSecondary = localStorage.getItem('secondary') || 'orange';
            const sysTheme = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
            
            return {
                theme: savedTheme || sysTheme,
                accent: savedAccent,
                secondary: savedSecondary
            };
        }

        function applyState(state) {
            // Apply variables
            document.documentElement.setAttribute('data-theme', state.theme);
            document.documentElement.setAttribute('data-accent', state.accent);
            document.documentElement.setAttribute('data-secondary', state.secondary);
            
            // Save to storage
            localStorage.setItem('theme', state.theme);
            localStorage.setItem('accent', state.accent);
            localStorage.setItem('secondary', state.secondary);
            
            // Update Label
            const label = document.getElementById('current-scheme-label');
            if(label) label.innerText = `${PRIMARY_NAMES[state.accent]} + ${SECONDARY_NAMES[state.secondary]}`;

            // Update Active Buttons
            document.querySelectorAll('.color-btn').forEach(btn => {
                const btnAccent = btn.getAttribute('data-set-accent');
                const btnSecondary = btn.getAttribute('data-set-secondary');
                
                if ((btnAccent && btnAccent === state.accent) || 
                    (btnSecondary && btnSecondary === state.secondary)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function toggleTheme() {
            const current = getPreferredState();
            const newTheme = current.theme === 'dark' ? 'light' : 'dark';
            applyState({ ...current, theme: newTheme });
        }

        function updateColor(type, value) {
            const current = getPreferredState();
            const newState = { ...current };
            newState[type] = value;
            applyState(newState);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            applyState(getPreferredState());

            // Bind Color Buttons
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const accent = btn.getAttribute('data-set-accent');
                    const secondary = btn.getAttribute('data-set-secondary');
                    
                    if (accent) updateColor('accent', accent);
                    if (secondary) updateColor('secondary', secondary);
                });
            });
        });
    </script>
</body>
</html>